/**
 * hygress v0.1.3 build Sep 18 2015
 * https://github.com/vanruesc/hygress
 * Copyright 2015 Raoul van Rueschen, Zlib
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Hygress=i()}(this,function(){"use strict";function t(t){var i=this;this.dt=1e3/60,this.now=void 0!==window.performance?window.performance.now():Date.now(),this.then=this.now,this.accumulator=0,this.ctx=null,this.canvas=document.createElement("canvas"),this.clearCanvas=!0,this.enabled=!0,void 0!==t&&(void 0!==t.dt&&(this.dt=1e3*t.dt),void 0!==t.canvas&&(this.canvas=t.canvas),void 0!==t.clearCanvas&&(this.clearCanvas=t.clearCanvas),void 0!==t.enabled&&(this.enabled=t.enabled),this.size=t.size),this.render=function(t){i._render(t)}}function i(t,i){return Math.abs(t-i)<=s}function e(t){this.TWO_PI=2*Math.PI,this.rotation=0,this.theta=0,this.step=360*Math.PI/180,this.firstCoord={x:0,y:0},this.prevCoord={x:0,y:0},this.r=2*Math.random()+s,this.R=this.r+2*Math.random()+s,this.d=0,this.iterations=300*Math.random()+3|0,this.rotationSpeed=.05*Math.random()-.05*Math.random(),this.origin={x:0,y:0},this.opacity=.75,this.lineWidth=.5,this.colourRoll=!0,this.hue=0,this.saturation=100,this.luminance=50,this.setting=t,this.rInv=1/this.r}function o(i){t.call(this,i),this.ht=new e,this.transitionTime=.25,this._opacity={start:0,difference:0,target:.75,elapsed:0,transitionActive:!1},this._scale={start:0,difference:0,target:0,max:0,factor:1,elapsed:0,transitionActive:!1},this.visible=!0,this.size=this.size,void 0!==i&&(void 0!==i.dt&&(this.dt=i.dt),void 0!==i.clearCanvas&&(this.clearCanvas=i.clearCanvas),void 0!==i.transitionTime&&(this.transitionTime=i.transitionTime),void 0!==i.colourRoll&&(this.ht.colourRoll=i.colourRoll),void 0!==i.hue&&(this.ht.hue=i.hue),void 0!==i.saturation&&(this.ht.saturation=i.saturation),void 0!==i.luminance&&(this.ht.hue=i.luminance),void 0!==i.canvas&&(this.canvas=i.canvas),this.ht.settings=i.hypotrochoid,this.size=i.size,void 0!==i.opacity&&(this.ht.opacity=this._opacity.target=i.opacity),void 0!==i.scale&&(this._scale.factor=i.scale,this.ht.d*=this._scale.factor)),this.visible=this.ht.opacity>0&&this.ht.d>0}Object.defineProperty(t.prototype,"canvas",{get:function(){return this.ctx.canvas},set:function(t){void 0!==t&&void 0!==t.getContext&&(this.ctx=t.getContext("2d"))}}),Object.defineProperty(t.prototype,"size",{get:function(){return[this.ctx.canvas.width,this.ctx.canvas.height]},set:function(t){void 0!==t&&2===t.length&&(this.ctx.canvas.width=t[0],this.ctx.canvas.height=t[1])}}),t.prototype.update=function(){},t.prototype.draw=function(){},t.prototype._render=function(t){var i;void 0===t&&(t=void 0!==window.performance?window.performance.now():Date.now()),this.clearCanvas&&this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.now=t,i=this.now-this.then,this.then=this.now,this.enabled&&(this.accumulator+=i,this.accumulator>=this.dt&&(this.update(i),this.accumulator-=this.dt),this.draw())};var s=1e-4;return Object.defineProperty(e.prototype,"settings",{get:function(){return{r:this.r,R:this.R,d:this.d,iterations:this.iterations,rotation:this.rotationSpeed,origin:this.origin,opacity:this.opacity,lineWidth:this.lineWidth,colourRoll:this.colourRoll,saturation:this.saturation,luminance:this.luminance,hue:this.hue}},set:function(t){void 0!==t&&(void 0!==t.r&&(this.r=t.r),void 0!==t.R&&(this.R=t.R),void 0!==t.d&&(this.d=t.d),void 0!==t.iterations&&(this.iterations=t.iterations),void 0!==t.rotation&&(this.rotationSpeed=t.rotation),void 0!==t.origin&&(this.origin=t.origin),void 0!==t.opacity&&(this.opacity=t.opacity),void 0!==t.lineWidth&&(this.lineWidth=t.lineWidth),void 0!==t.colourRoll&&(this.colourRoll=t.colourRoll),void 0!==t.saturation&&(this.saturation=t.saturation),void 0!==t.luminance&&(this.luminance=t.luminance),void 0!==t.hue&&(this.hue=t.hue))}}),e.prototype.update=function(){this.colourRoll&&(this.hue-=.5,this.hue<=-360&&(this.hue+=360)),i(this.rotationSpeed,0)||(this.rotation-=this.rotationSpeed,Math.abs(this.rotation)>=this.TWO_PI&&(this.rotation-=this.TWO_PI))},e.prototype.draw=function(t){var e,o,s=0,h=0,n=!0;for(t.save(),t.lineWidth=this.lineWidth,t.lineCap="round",t.globalCompositeOperation="source-over",this.theta=0,this.prevCoord.x=0,e=this.iterations,t.beginPath();e>=0&&(n||!i(this.firstCoord.x,s)||!i(this.firstCoord.y,h));)n&&(n=!1),this.theta+=this.step,o=(this.r/this.R-1)*this.theta,s=(this.r-this.R)*Math.cos(this.theta)+this.d*Math.cos(o+this.rotation)+this.origin.x+(this.R-this.r),h=(this.r-this.R)*Math.sin(this.theta)-this.d*Math.sin(o+this.rotation)+this.origin.y,this.prevCoord.x?(t.moveTo(this.prevCoord.x,this.prevCoord.y),t.lineTo(s,h)):(this.firstCoord.x=s,this.firstCoord.y=h,n=!0),this.prevCoord.x=s,this.prevCoord.y=h,--e;t.strokeStyle="hsla("+this.hue+", "+this.saturation+"%, "+this.luminance+"%, "+this.opacity+")",t.stroke(),t.restore()},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,Object.defineProperty(o.prototype,"hypotrochoid",{get:function(){return this.ht.settings},set:function(t){this.ht.settings=t}}),Object.defineProperty(o.prototype,"size",{get:function(){return[this.ctx.canvas.width,this.ctx.canvas.height]},set:function(t){var i;void 0!==t&&2===t.length&&(i=t[0]<t[1]?t[0]:t[1],this.ctx.canvas.width=i,this.ctx.canvas.height=i,this.htSize=i>>1,this.ht.origin.x=this.ht.origin.y=this._scale.max)}}),Object.defineProperty(o.prototype,"htSize",{get:function(){return this.ht.d},set:function(t){void 0===t||"number"!=typeof t||isNaN(t)||(this._scale.max=t,this._scale.target=this._scale.factor*this._scale.max,this._scale.transitionActive||(this.ht.d=this._scale.target))}}),Object.defineProperty(o.prototype,"origin",{get:function(){return this.ht.origin},set:function(t){void 0!==t&&2===t.length&&(this.ht.origin.x=t[0],this.ht.origin.y=t[1])}}),Object.defineProperty(o.prototype,"colourRoll",{get:function(){return this.ht.colourRoll},set:function(t){void 0!==t&&"boolean"==typeof t&&(this.ht.colourRoll=t)}}),Object.defineProperty(o.prototype,"hue",{get:function(){return this.ht.colour},set:function(t){void 0===t||"number"!=typeof t||isNaN(t)||(this.ht.hue=t)}}),Object.defineProperty(o.prototype,"saturation",{get:function(){return this.ht.colour},set:function(t){void 0===t||"number"!=typeof t||isNaN(t)||(this.ht.saturation=t)}}),Object.defineProperty(o.prototype,"luminance",{get:function(){return this.ht.colour},set:function(t){void 0===t||"number"!=typeof t||isNaN(t)||(this.ht.luminance=t)}}),Object.defineProperty(o.prototype,"lineWidth",{get:function(){return this.ht.lineWidth},set:function(t){void 0===t||"number"!=typeof t||isNaN(t)||(this.ht.lineWidth=t)}}),Object.defineProperty(o.prototype,"opacity",{get:function(){return this.ht.opacity},set:function(t){void 0===t||"number"!=typeof t||isNaN(t)||(0>t&&(t=0),t>1&&(t=1),this._opacity.start=this.ht.opacity,this._opacity.target=t,this._opacity.difference=this.ht.opacity-this._opacity.target,this._opacity.elapsed=0,this._opacity.transitionActive=!0,this.visible=!0)}}),Object.defineProperty(o.prototype,"scale",{get:function(){return this.ht.d},set:function(t){void 0===t||"number"!=typeof t||isNaN(t)||(0>t&&(t=0),t>1&&(t=1),this._scale.factor=t,this._scale.start=this.ht.d,this._scale.target=this._scale.factor*this._scale.max,this._scale.difference=this.ht.d-this._scale.target,this._scale.elapsed=0,this._scale.transitionActive=!0,this.visible=!0)}}),o.prototype.update=function(t){var i,e,o;t/=1e3,this.visible&&(i=this._opacity,e=this._scale,i.transitionActive&&(o=i.elapsed/this.transitionTime,o>1&&(o=1),this.ht.opacity=i.start-o*i.difference,i.elapsed+=t,this.ht.opacity===i.target&&(i.transitionActive=!1,0===this.ht.opacity&&(this.draw(),this.visible=!1))),e.transitionActive&&(o=e.elapsed/this.transitionTime,o>1&&(o=1),this.ht.d=e.start-o*e.difference,e.elapsed+=t,this.ht.d===e.target&&(e.transitionActive=!1,0===this.ht.d&&(this.draw(),this.visible=!1))),this.ht.update())},o.prototype.draw=function(){this.visible&&this.ht.draw(this.ctx)},o.Hypotrochoid=Object.freeze({ILLUMINATI:{r:.0147,R:.022,iterations:220,rotation:.003},MULTISTAR:{r:.675,R:1.64,iterations:34,rotation:.023},HYPNOTIZER:{r:.42,R:.86,iterations:43,rotation:.01},NEGATIVE:{r:.35,R:.614,iterations:100,rotation:.023},WINDMILL:{r:.7853,R:1.3751,iterations:64,rotation:.01},TRIPLET:{r:1.671,R:2.509,iterations:160,rotation:.046},PENTAGRAM:{r:3,R:5,iterations:5,rotation:.03},RING:{r:3.9,R:5,iterations:50,rotation:.013}}),o});